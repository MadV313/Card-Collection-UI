<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DayZ Duel UI - Coin Flip & Turn Logic</title>
  <style>
    body { background-color: #101010; color: #fff; font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    .status-bar { display: flex; justify-content: space-between; max-width: 900px; margin: 0 auto 15px; font-size: 16px; }
    .card-row, .field-row, .button-row { display: flex; justify-content: center; gap: 10px; margin: 10px 0; flex-wrap: wrap; }
    .field-row { align-items: center; }
    .card { width: 120px; height: 170px; background-size: cover; border: 2px solid #444; border-radius: 6px; }
    .pile { width: 100px; height: 140px; background-size: cover; border-radius: 6px; border: 2px dashed #aaa; }
    button { padding: 10px 20px; font-size: 14px; background-color: #f9c74f; border: none; border-radius: 5px; cursor: pointer; }
    #prompt { margin-top: 15px; font-weight: bold; color: #fefefe; }
  </style>
</head>
<body>
  <div class="status-bar">
    <div>Opponent HP: 200</div>
    <div>Wager: 10 Coins</div>
    <div>Your HP: 200</div>
  </div>

  <div class="card-row" id="opponent-field"></div>

  <div class="field-row">
    <div class="pile" style="background-image: url('https://drive.google.com/uc?export=view&id=1-1vMHqk1KkVdexTsOLv05pCkRqRU60Cs');" title="Draw Pile"></div>
    <div class="card-row" id="your-field" style="gap: 10px;"></div>
    <div class="pile" style="background-image: url('https://drive.google.com/uc?export=view&id=1-1vMHqk1KkVdexTsOLv05pCkRqRU60Cs');" title="Discard Pile"></div>
  </div>

  <div class="card-row" id="your-hand"></div>

  <div class="button-row">
    <button onclick="startDuel()">Flip Coin & Start Duel</button>
    <button onclick="alert('Draw triggered')" id="drawBtn">Draw</button>
    <button onclick="alert('Play triggered')" id="playBtn">Play Card</button>
    <button onclick="alert('Discard triggered')" id="discardBtn">Discard</button>
    <button onclick="endTurn()" id="endTurnBtn">End Turn</button>
  </div>

  <div id="prompt">[System Message: Waiting to begin duel...]</div>

  <script>
    let duelState = {
      player1: { name: "Player", hp: 200, hand: [], field: [], deck: [], canPlay: false },
      player2: { name: "Bot", hp: 200, hand: [], field: [], deck: [], canPlay: false },
      currentTurn: null,
      coinFlipResult: null
    };

    const devDeck = [
      {"card_id": "001", "name": "M4-A1", "image_url": "https://drive.google.com/uc?export=view&id=1Rn_Dhp-cWqSoEN39xQ99HVgtWA7LlHDz"},
      {"card_id": "008", "name": "BK-18", "image_url": "https://drive.google.com/uc?export=view&id=1cJLHT1NTKmCvY5OhT_H8ziwYC97f8bpM"},
      {"card_id": "028", "name": "Derringer", "image_url": "https://drive.google.com/uc?export=view&id=1LVgvRoGFm_dql7C2IZS9nzWL6MPXd3q9"},
      {"card_id": "059", "name": "Welding Mask", "image_url": "https://drive.google.com/uc?export=view&id=1E-ncZMtYyPHIWira7-WpVbc8010fUGib"},
      {"card_id": "083", "name": "Box of Ammo", "image_url": "https://drive.google.com/uc?export=view&id=1sBWFZRQfLv9S2ObEIPdIbfuEiRe-S-V7"},
      {"card_id": "089", "name": "Sewing Kit", "image_url": "https://drive.google.com/uc?export=view&id=1T8TtHukC-XOdcFKIwtKjyRbZKA9wHnY8"},
      {"card_id": "022", "name": "AK-101", "image_url": "https://drive.google.com/uc?export=view&id=1g7jxd2QoE_jwM7Xyd9NqzAXJRMGeFq4N"},
      {"card_id": "065", "name": "Map", "image_url": "https://drive.google.com/uc?export=view&id=1ggbWaO4_GvUPCTMz7mEuBhdb4bo8aos1"}
    ];

    function startDuel() {
      resetUI();
      duelState.player1.deck = [...devDeck];
      duelState.player2.deck = [...devDeck];
      drawCard("player1", 3);
      drawCard("player2", 3);
      flipCoin();
    }

    function flipCoin() {
      const result = Math.random() < 0.5 ? "heads" : "tails";
      duelState.coinFlipResult = result;
      if (result === "heads") {
        duelState.currentTurn = "player1";
        duelState.player1.canPlay = true;
        duelState.player2.canPlay = false;
        document.getElementById("prompt").innerText = "Coin Toss: Heads — You go first.";
      } else {
        duelState.currentTurn = "player2";
        duelState.player1.canPlay = false;
        duelState.player2.canPlay = true;
        document.getElementById("prompt").innerText = "Coin Toss: Tails — Bot goes first.";
      }
    }

    function drawCard(playerKey, count = 1) {
      const player = duelState[playerKey];
      const rowId = playerKey === "player1" ? "your-hand" : "opponent-field";
      const row = document.getElementById(rowId);
      for (let i = 0; i < count && player.deck.length > 0; i++) {
        const card = player.deck.pop();
        player.hand.push(card);
        const cardDiv = document.createElement("div");
        cardDiv.className = "card";
        cardDiv.style.backgroundImage = `url('${card.image_url}')`;
        cardDiv.title = card.name;
        row.appendChild(cardDiv);
      }
    }

    function endTurn() {
      if (duelState.currentTurn === "player1") {
        duelState.currentTurn = "player2";
        duelState.player1.canPlay = false;
        duelState.player2.canPlay = true;
        document.getElementById("prompt").innerText = "Bot's Turn";
      } else {
        duelState.currentTurn = "player1";
        duelState.player1.canPlay = true;
        duelState.player2.canPlay = false;
        document.getElementById("prompt").innerText = "Your Turn";
      }
    }

    function resetUI() {
      document.getElementById("your-hand").innerHTML = "";
      document.getElementById("your-field").innerHTML = "";
      document.getElementById("opponent-field").innerHTML = "";
      duelState.player1.hand = [];
      duelState.player2.hand = [];
      duelState.player1.field = [];
      duelState.player2.field = [];
    }
  </script>
</body>
</html>
